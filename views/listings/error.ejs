<% layout("layouts/boilerplate") -%>

<style>
    /* Custom styles for our funny error page */
    .error-container {
        text-align: center;
        padding: 40px 20px;
        font-family: 'Courier New', Courier, monospace;
        color: #333;
    }
    .gremlin-svg {
        width: 150px;
        margin-bottom: 20px;
        animation: subtle-shake 2s infinite ease-in-out;
    }
    .error-heading {
        font-size: 2.5rem;
        font-weight: bold;
        color: #d9534f;
        text-shadow: 2px 2px #f9f9f9;
    }
    .error-subheading {
        font-size: 1.2rem;
        color: #555;
    }
    .error-message-box {
        background-color: #f8d7da;
        border: 1px dashed #d9534f;
        border-radius: 8px;
        padding: 15px;
        margin-top: 20px;
        display: inline-block;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .escape-button {
        background-color: #5cb85c;
        border: none;
        font-weight: bold;
        padding: 12px 25px;
        border-radius: 50px;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .escape-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    /* A little animation for our gremlin */
    @keyframes subtle-shake {
        0%, 100% { transform: rotate(-1deg); }
        50% { transform: rotate(1deg); }
    }
</style>

<div class="row mt-5">
    <div class="col-md-8 offset-md-2">
        <div class="error-container">
            <!-- SVG of a mischievous gremlin tangled in wires -->
            <svg class="gremlin-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path fill="#93C572" d="M63.5,34.9C79.4,22.4,103.8,20,123.6,27.3C143.4,34.6,158.5,51.6,161.8,71.1C165.1,90.6,156.6,112.6,142.8,127.9C129,143.2,109.9,151.8,91.2,157.9C72.5,164,54.2,167.6,38.9,159.9C23.6,152.2,11.3,133.2,7.3,114.7C3.3,96.2,7.6,78.2,17.4,63.1C27.2,48,47.6,47.4,63.5,34.9Z" transform="translate(10 10)" />
                <g transform="translate(50 60)">
                    <path d="M25,30 Q40,5 55,30" stroke="black" fill="none" stroke-width="4" stroke-linecap="round"/>
                    <circle cx="30" cy="45" r="5" fill="black"/>
                    <circle cx="50" cy="45" r="5" fill="black"/>
                    <path d="M35,65 Q40,75 45,65" stroke="black" fill="none" stroke-width="4" stroke-linecap="round"/>
                </g>
                <path d="M10,80 Q50,20 90,90 T150,100" stroke="#4a4a4a" stroke-width="3" fill="none" stroke-dasharray="5,5"/>
                <path d="M180,50 Q120,150 60,180 T10,150" stroke="#4a4a4a" stroke-width="3" fill="none" stroke-dasharray="5,5"/>
            </svg>

            <h1 class="error-heading">Houston, we have a gremlin!</h1>
            <p class="error-subheading">A mischievous digital creature has chewed through the wires of this page.</p>

            <!-- Only show the error message box if an error message exists -->
            <% if (message) { %>
                <div class="error-message-box">
                    <p class="mb-0"><strong>The gremlin left a note:</strong></p>
                    <p class="mb-0 font-monospace">"<%= message %>"</p>
                </div>
            <% } %>

            <div class="mt-4">
                <a href="/listings" class="btn escape-button text-white">Escape to Safety (Homepage)</a>
            </div>
        </div>
    </div>
</div>